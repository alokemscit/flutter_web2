!function($){var settings={},roots={},caches={},_consts={className:{BUTTON:"button",LEVEL:"level",ICO_LOADING:"ico_loading",SWITCH:"switch",NAME:"node_name"},event:{NODECREATED:"ztree_nodeCreated",CLICK:"ztree_click",EXPAND:"ztree_expand",COLLAPSE:"ztree_collapse",ASYNC_SUCCESS:"ztree_async_success",ASYNC_ERROR:"ztree_async_error",REMOVE:"ztree_remove",SELECTED:"ztree_selected",UNSELECTED:"ztree_unselected"},id:{A:"_a",ICON:"_ico",SPAN:"_span",SWITCH:"_switch",UL:"_ul"},line:{ROOT:"root",ROOTS:"roots",CENTER:"center",BOTTOM:"bottom",NOLINE:"noline",LINE:"line"},folder:{OPEN:"open",CLOSE:"close",DOCU:"docu"},node:{CURSELECTED:"curSelectedNode"}},_setting={treeId:"",treeObj:null,view:{addDiyDom:null,autoCancelSelected:!0,dblClickExpand:!0,expandSpeed:"fast",fontCss:{},nameIsHTML:!1,selectedMulti:!0,showIcon:!0,showLine:!0,showTitle:!0,txtSelectedEnable:!1},data:{key:{children:"children",name:"name",title:"",url:"url",icon:"icon"},simpleData:{enable:!1,idKey:"id",pIdKey:"pId",rootPId:null},keep:{parent:!1,leaf:!1}},async:{enable:!1,contentType:"application/x-www-form-urlencoded",type:"post",dataType:"text",url:"",autoParam:[],otherParam:[],dataFilter:null},callback:{beforeAsync:null,beforeClick:null,beforeDblClick:null,beforeRightClick:null,beforeMouseDown:null,beforeMouseUp:null,beforeExpand:null,beforeCollapse:null,beforeRemove:null,onAsyncError:null,onAsyncSuccess:null,onNodeCreated:null,onClick:null,onDblClick:null,onRightClick:null,onMouseDown:null,onMouseUp:null,onExpand:null,onCollapse:null,onRemove:null}},_initRoot=function(e){var t=data.getRoot(e);t||(t={},data.setRoot(e,t)),t[e.data.key.children]=[],t.expandTriggerFlag=!1,t.curSelectedList=[],t.noSelection=!0,t.createdNodes=[],t.zId=0,t._ver=(new Date).getTime()},_initCache=function(e){var t=data.getCache(e);t||(t={},data.setCache(e,t)),t.nodes=[],t.doms=[]},_bindEvent=function(i){var e=i.treeObj,t=consts.event;e.bind(t.NODECREATED,function(e,t,n){tools.apply(i.callback.onNodeCreated,[e,t,n])}),e.bind(t.CLICK,function(e,t,n,o,a){tools.apply(i.callback.onClick,[t,n,o,a])}),e.bind(t.EXPAND,function(e,t,n){tools.apply(i.callback.onExpand,[e,t,n])}),e.bind(t.COLLAPSE,function(e,t,n){tools.apply(i.callback.onCollapse,[e,t,n])}),e.bind(t.ASYNC_SUCCESS,function(e,t,n,o){tools.apply(i.callback.onAsyncSuccess,[e,t,n,o])}),e.bind(t.ASYNC_ERROR,function(e,t,n,o,a,r){tools.apply(i.callback.onAsyncError,[e,t,n,o,a,r])}),e.bind(t.REMOVE,function(e,t,n){tools.apply(i.callback.onRemove,[e,t,n])}),e.bind(t.SELECTED,function(e,t,n){tools.apply(i.callback.onSelected,[t,n])}),e.bind(t.UNSELECTED,function(e,t,n){tools.apply(i.callback.onUnSelected,[t,n])})},_unbindEvent=function(e){var t=e.treeObj,n=consts.event;t.unbind(n.NODECREATED).unbind(n.CLICK).unbind(n.EXPAND).unbind(n.COLLAPSE).unbind(n.ASYNC_SUCCESS).unbind(n.ASYNC_ERROR).unbind(n.REMOVE).unbind(n.SELECTED).unbind(n.UNSELECTED)},_eventProxy=function(e){var t=e.target,n=data.getSetting(e.data.treeId),o="",a=null,r="",i="",s=null,d=null,l=null;if(tools.eqs(e.type,"mousedown")?i="mousedown":tools.eqs(e.type,"mouseup")?i="mouseup":tools.eqs(e.type,"contextmenu")?i="contextmenu":tools.eqs(e.type,"click")?tools.eqs(t.tagName,"span")&&null!==t.getAttribute("treeNode"+consts.id.SWITCH)?(o=tools.getNodeMainDom(t).id,r="switchNode"):(l=tools.getMDom(n,t,[{tagName:"a",attrName:"treeNode"+consts.id.A}]))&&(o=tools.getNodeMainDom(l).id,r="clickNode"):tools.eqs(e.type,"dblclick")&&(i="dblclick",(l=tools.getMDom(n,t,[{tagName:"a",attrName:"treeNode"+consts.id.A}]))&&(o=tools.getNodeMainDom(l).id,r="switchNode")),0<i.length&&0==o.length&&(l=tools.getMDom(n,t,[{tagName:"a",attrName:"treeNode"+consts.id.A}]))&&(o=tools.getNodeMainDom(l).id),0<o.length)switch(a=data.getNodeCache(n,o),r){case"switchNode":a.isParent&&(tools.eqs(e.type,"click")||tools.eqs(e.type,"dblclick")&&tools.apply(n.view.dblClickExpand,[n.treeId,a],n.view.dblClickExpand))?s=handler.onSwitchNode:r="";break;case"clickNode":s=handler.onClickNode}switch(i){case"mousedown":d=handler.onZTreeMousedown;break;case"mouseup":d=handler.onZTreeMouseup;break;case"dblclick":d=handler.onZTreeDblclick;break;case"contextmenu":d=handler.onZTreeContextmenu}return{stop:!1,node:a,nodeEventType:r,nodeEventCallback:s,treeEventType:i,treeEventCallback:d}},_initNode=function(e,t,n,o,a,r,i){var s,d;n&&(s=data.getRoot(e),d=e.data.key.children,n.level=t,n.tId=e.treeId+"_"+ ++s.zId,n.parentTId=o?o.tId:null,n.open="string"==typeof n.open?tools.eqs(n.open,"true"):!!n.open,n[d]&&0<n[d].length?(n.isParent=!0,n.zAsync=!0):(n.isParent="string"==typeof n.isParent?tools.eqs(n.isParent,"true"):!!n.isParent,n.open=!(!n.isParent||e.async.enable)&&n.open,n.zAsync=!n.isParent),n.isFirstNode=a,n.isLastNode=r,n.getParentNode=function(){return data.getNodeCache(e,n.parentTId)},n.getPreNode=function(){return data.getPreNode(e,n)},n.getNextNode=function(){return data.getNextNode(e,n)},n.getIndex=function(){return data.getNodeIndex(e,n)},n.getPath=function(){return data.getNodePath(e,n)},n.isAjaxing=!1,data.fixPIdKeyValue(e,n))},_init={bind:[_bindEvent],unbind:[_unbindEvent],caches:[_initCache],nodes:[_initNode],proxys:[_eventProxy],roots:[_initRoot],beforeA:[],afterA:[],innerBeforeA:[],innerAfterA:[],zTreeTools:[]},data={addNodeCache:function(e,t){data.getCache(e).nodes[data.getNodeCacheId(t.tId)]=t},getNodeCacheId:function(e){return e.substring(e.lastIndexOf("_")+1)},addAfterA:function(e){_init.afterA.push(e)},addBeforeA:function(e){_init.beforeA.push(e)},addInnerAfterA:function(e){_init.innerAfterA.push(e)},addInnerBeforeA:function(e){_init.innerBeforeA.push(e)},addInitBind:function(e){_init.bind.push(e)},addInitUnBind:function(e){_init.unbind.push(e)},addInitCache:function(e){_init.caches.push(e)},addInitNode:function(e){_init.nodes.push(e)},addInitProxy:function(e,t){t?_init.proxys.splice(0,0,e):_init.proxys.push(e)},addInitRoot:function(e){_init.roots.push(e)},addNodesData:function(e,t,n,o){var a,r=e.data.key.children;t[r]?n>=t[r].length&&(n=-1):(t[r]=[],n=-1),0<t[r].length&&0===n?(t[r][0].isFirstNode=!1,view.setNodeLineIcos(e,t[r][0])):0<t[r].length&&n<0&&(t[r][t[r].length-1].isLastNode=!1,view.setNodeLineIcos(e,t[r][t[r].length-1])),t.isParent=!0,n<0?t[r]=t[r].concat(o):(a=[n,0].concat(o),t[r].splice.apply(t[r],a))},addSelectedNode:function(e,t){var n=data.getRoot(e);data.isSelectedNode(e,t)||n.curSelectedList.push(t)},addCreatedNode:function(e,t){(e.callback.onNodeCreated||e.view.addDiyDom)&&data.getRoot(e).createdNodes.push(t)},addZTreeTools:function(e){_init.zTreeTools.push(e)},exSetting:function(e){$.extend(!0,_setting,e)},fixPIdKeyValue:function(e,t){e.data.simpleData.enable&&(t[e.data.simpleData.pIdKey]=t.parentTId?t.getParentNode()[e.data.simpleData.idKey]:e.data.simpleData.rootPId)},getAfterA:function(e,t,n){for(var o=0,a=_init.afterA.length;o<a;o++)_init.afterA[o].apply(this,arguments)},getBeforeA:function(e,t,n){for(var o=0,a=_init.beforeA.length;o<a;o++)_init.beforeA[o].apply(this,arguments)},getInnerAfterA:function(e,t,n){for(var o=0,a=_init.innerAfterA.length;o<a;o++)_init.innerAfterA[o].apply(this,arguments)},getInnerBeforeA:function(e,t,n){for(var o=0,a=_init.innerBeforeA.length;o<a;o++)_init.innerBeforeA[o].apply(this,arguments)},getCache:function(e){return caches[e.treeId]},getNodeIndex:function(e,t){if(!t)return null;for(var n=e.data.key.children,o=t.parentTId?t.getParentNode():data.getRoot(e),a=0,r=o[n].length-1;a<=r;a++)if(o[n][a]===t)return a;return-1},getNextNode:function(e,t){if(!t)return null;for(var n=e.data.key.children,o=t.parentTId?t.getParentNode():data.getRoot(e),a=0,r=o[n].length-1;a<=r;a++)if(o[n][a]===t)return a==r?null:o[n][a+1];return null},getNodeByParam:function(e,t,n,o){if(!t||!n)return null;for(var a=e.data.key.children,r=0,i=t.length;r<i;r++){if(t[r][n]==o)return t[r];var s=data.getNodeByParam(e,t[r][a],n,o);if(s)return s}return null},getNodeCache:function(e,t){if(!t)return null;var n=caches[e.treeId].nodes[data.getNodeCacheId(t)];return n||null},getNodeName:function(e,t){return""+t[e.data.key.name]},getNodePath:function(e,t){if(!t)return null;var n=t.parentTId?t.getParentNode().getPath():[];return n&&n.push(t),n},getNodeTitle:function(e,t){return""+t[""===e.data.key.title?e.data.key.name:e.data.key.title]},getNodes:function(e){return data.getRoot(e)[e.data.key.children]},getNodesByParam:function(e,t,n,o){if(!t||!n)return[];for(var a=e.data.key.children,r=[],i=0,s=t.length;i<s;i++)t[i][n]==o&&r.push(t[i]),r=r.concat(data.getNodesByParam(e,t[i][a],n,o));return r},getNodesByParamFuzzy:function(e,t,n,o){if(!t||!n)return[];var a=e.data.key.children,r=[];o=o.toLowerCase();for(var i=0,s=t.length;i<s;i++)"string"==typeof t[i][n]&&-1<t[i][n].toLowerCase().indexOf(o)&&r.push(t[i]),r=r.concat(data.getNodesByParamFuzzy(e,t[i][a],n,o));return r},getNodesByFilter:function(e,t,n,o,a){if(!t)return o?null:[];for(var r=e.data.key.children,i=o?null:[],s=0,d=t.length;s<d;s++){if(tools.apply(n,[t[s],a],!1)){if(o)return t[s];i.push(t[s])}var l=data.getNodesByFilter(e,t[s][r],n,o,a);if(o&&l)return l;i=o?l:i.concat(l)}return i},getPreNode:function(e,t){if(!t)return null;for(var n=e.data.key.children,o=t.parentTId?t.getParentNode():data.getRoot(e),a=0,r=o[n].length;a<r;a++)if(o[n][a]===t)return 0==a?null:o[n][a-1];return null},getRoot:function(e){return e?roots[e.treeId]:null},getRoots:function(){return roots},getSetting:function(e){return settings[e]},getSettings:function(){return settings},getZTreeTools:function(e){var t=this.getRoot(this.getSetting(e));return t?t.treeTools:null},initCache:function(e){for(var t=0,n=_init.caches.length;t<n;t++)_init.caches[t].apply(this,arguments)},initNode:function(e,t,n,o,a,r){for(var i=0,s=_init.nodes.length;i<s;i++)_init.nodes[i].apply(this,arguments)},initRoot:function(e){for(var t=0,n=_init.roots.length;t<n;t++)_init.roots[t].apply(this,arguments)},isSelectedNode:function(e,t){for(var n=data.getRoot(e),o=0,a=n.curSelectedList.length;o<a;o++)if(t===n.curSelectedList[o])return!0;return!1},removeNodeCache:function(e,t){var n=e.data.key.children;if(t[n])for(var o=0,a=t[n].length;o<a;o++)data.removeNodeCache(e,t[n][o]);data.getCache(e).nodes[data.getNodeCacheId(t.tId)]=null},removeSelectedNode:function(e,t){for(var n=data.getRoot(e),o=0,a=n.curSelectedList.length;o<a;o++)t!==n.curSelectedList[o]&&data.getNodeCache(e,n.curSelectedList[o].tId)||(n.curSelectedList.splice(o,1),e.treeObj.trigger(consts.event.UNSELECTED,[e.treeId,t]),o--,a--)},setCache:function(e,t){caches[e.treeId]=t},setRoot:function(e,t){roots[e.treeId]=t},setZTreeTools:function(e,t){for(var n=0,o=_init.zTreeTools.length;n<o;n++)_init.zTreeTools[n].apply(this,arguments)},transformToArrayFormat:function(e,t){if(!t)return[];var n=e.data.key.children,o=[];if(tools.isArray(t))for(var a=0,r=t.length;a<r;a++)o.push(t[a]),t[a][n]&&(o=o.concat(data.transformToArrayFormat(e,t[a][n])));else o.push(t),t[n]&&(o=o.concat(data.transformToArrayFormat(e,t[n])));return o},transformTozTreeFormat:function(e,t){var n=e.data.simpleData.idKey,o=e.data.simpleData.pIdKey,a=e.data.key.children;if(!n||""==n||!t)return[];if(tools.isArray(t)){for(var r=[],i={},s=0,d=t.length;s<d;s++)i[t[s][n]]=t[s];for(s=0,d=t.length;s<d;s++)i[t[s][o]]&&t[s][n]!=t[s][o]?(i[t[s][o]][a]||(i[t[s][o]][a]=[]),i[t[s][o]][a].push(t[s])):r.push(t[s]);return r}return[t]}},event={bindEvent:function(e){for(var t=0,n=_init.bind.length;t<n;t++)_init.bind[t].apply(this,arguments)},unbindEvent:function(e){for(var t=0,n=_init.unbind.length;t<n;t++)_init.unbind[t].apply(this,arguments)},bindTree:function(e){var t={treeId:e.treeId},n=e.treeObj;e.view.txtSelectedEnable||n.bind("selectstart",handler.onSelectStart).css({"-moz-user-select":"-moz-none"}),n.bind("click",t,event.proxy),n.bind("dblclick",t,event.proxy),n.bind("mouseover",t,event.proxy),n.bind("mouseout",t,event.proxy),n.bind("mousedown",t,event.proxy),n.bind("mouseup",t,event.proxy),n.bind("contextmenu",t,event.proxy)},unbindTree:function(e){e.treeObj.unbind("selectstart",handler.onSelectStart).unbind("click",event.proxy).unbind("dblclick",event.proxy).unbind("mouseover",event.proxy).unbind("mouseout",event.proxy).unbind("mousedown",event.proxy).unbind("mouseup",event.proxy).unbind("contextmenu",event.proxy)},doProxy:function(e){for(var t=[],n=0,o=_init.proxys.length;n<o;n++){var a=_init.proxys[n].apply(this,arguments);if(t.push(a),a.stop)break}return t},proxy:function(e){var t=data.getSetting(e.data.treeId);if(!tools.uCanDo(t,e))return!0;for(var n=event.doProxy(e),o=!0,a=0,r=n.length;a<r;a++){var i=n[a];i.nodeEventCallback&&(o=i.nodeEventCallback.apply(i,[e,i.node])&&o),i.treeEventCallback&&(o=i.treeEventCallback.apply(i,[e,i.node])&&o)}return o}},handler={onSwitchNode:function(e,t){var n=data.getSetting(e.data.treeId);if(t.open){if(0==tools.apply(n.callback.beforeCollapse,[n.treeId,t],!0))return!0;data.getRoot(n).expandTriggerFlag=!0,view.switchNode(n,t)}else{if(0==tools.apply(n.callback.beforeExpand,[n.treeId,t],!0))return!0;data.getRoot(n).expandTriggerFlag=!0,view.switchNode(n,t)}return!0},onClickNode:function(e,t){var n=data.getSetting(e.data.treeId),o=n.view.autoCancelSelected&&(e.ctrlKey||e.metaKey)&&data.isSelectedNode(n,t)?0:n.view.autoCancelSelected&&(e.ctrlKey||e.metaKey)&&n.view.selectedMulti?2:1;return 0==tools.apply(n.callback.beforeClick,[n.treeId,t,o],!0)||(0==o?view.cancelPreSelectedNode(n,t):view.selectNode(n,t,2==o),n.treeObj.trigger(consts.event.CLICK,[e,n.treeId,t,o])),!0},onZTreeMousedown:function(e,t){var n=data.getSetting(e.data.treeId);return tools.apply(n.callback.beforeMouseDown,[n.treeId,t],!0)&&tools.apply(n.callback.onMouseDown,[e,n.treeId,t]),!0},onZTreeMouseup:function(e,t){var n=data.getSetting(e.data.treeId);return tools.apply(n.callback.beforeMouseUp,[n.treeId,t],!0)&&tools.apply(n.callback.onMouseUp,[e,n.treeId,t]),!0},onZTreeDblclick:function(e,t){var n=data.getSetting(e.data.treeId);return tools.apply(n.callback.beforeDblClick,[n.treeId,t],!0)&&tools.apply(n.callback.onDblClick,[e,n.treeId,t]),!0},onZTreeContextmenu:function(e,t){var n=data.getSetting(e.data.treeId);return tools.apply(n.callback.beforeRightClick,[n.treeId,t],!0)&&tools.apply(n.callback.onRightClick,[e,n.treeId,t]),"function"!=typeof n.callback.onRightClick},onSelectStart:function(e){var t=e.originalEvent.srcElement.nodeName.toLowerCase();return"input"===t||"textarea"===t}},tools={apply:function(e,t,n){return"function"==typeof e?e.apply(zt,t||[]):n},canAsync:function(e,t){var n=e.data.key.children;return e.async.enable&&t&&t.isParent&&!(t.zAsync||t[n]&&0<t[n].length)},clone:function(e){if(null===e)return null;var t=tools.isArray(e)?[]:{};for(var n in e)t[n]=e[n]instanceof Date?new Date(e[n].getTime()):"object"==typeof e[n]?tools.clone(e[n]):e[n];return t},eqs:function(e,t){return e.toLowerCase()===t.toLowerCase()},isArray:function(e){return"[object Array]"===Object.prototype.toString.apply(e)},isElement:function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName},$:function(e,t,n){return t&&"string"!=typeof t&&(n=t,t=""),"string"==typeof e?$(e,n?n.treeObj.get(0).ownerDocument:null):$("#"+e.tId+t,n?n.treeObj:null)},getMDom:function(e,t,n){if(!t)return null;for(;t&&t.id!==e.treeId;){for(var o=0,a=n.length;t.tagName&&o<a;o++)if(tools.eqs(t.tagName,n[o].tagName)&&null!==t.getAttribute(n[o].attrName))return t;t=t.parentNode}return null},getNodeMainDom:function(e){return $(e).parent("li").get(0)||$(e).parentsUntil("li").parent().get(0)},isChildOrSelf:function(e,t){return 0<$(e).closest("#"+t).length},uCanDo:function(e,t){return!0}},view={addNodes:function(e,t,n,o,a){var r,i,s;e.data.keep.leaf&&t&&!t.isParent||(tools.isArray(o)||(o=[o]),e.data.simpleData.enable&&(o=data.transformTozTreeFormat(e,o)),t?(r=$$(t,consts.id.SWITCH,e),i=$$(t,consts.id.ICON,e),s=$$(t,consts.id.UL,e),t.open||(view.replaceSwitchClass(t,r,consts.folder.CLOSE),view.replaceIcoClass(t,i,consts.folder.CLOSE),t.open=!1,s.css({display:"none"})),data.addNodesData(e,t,n,o),view.createNodes(e,t.level+1,o,t,n),a||view.expandCollapseParentNode(e,t,!0)):(data.addNodesData(e,data.getRoot(e),n,o),view.createNodes(e,0,o,null,n)))},appendNodes:function(e,t,n,o,a,r,i){if(!n)return[];var s,d,l=[],c=e.data.key.children,u=(o||data.getRoot(e))[c];(!u||a>=u.length-n.length)&&(a=-1);for(var p=0,f=n.length;p<f;p++){var g=n[p];r&&(s=(0===a||u.length==n.length)&&0==p,d=a<0&&p==n.length-1,data.initNode(e,t,g,o,s,d,i),data.addNodeCache(e,g));var N=[];g[c]&&0<g[c].length&&(N=view.appendNodes(e,t+1,g[c],g,-1,r,i&&g.open)),i&&(view.makeDOMNodeMainBefore(l,e,g),view.makeDOMNodeLine(l,e,g),data.getBeforeA(e,g,l),view.makeDOMNodeNameBefore(l,e,g),data.getInnerBeforeA(e,g,l),view.makeDOMNodeIcon(l,e,g),data.getInnerAfterA(e,g,l),view.makeDOMNodeNameAfter(l,e,g),data.getAfterA(e,g,l),g.isParent&&g.open&&view.makeUlHtml(e,g,l,N.join("")),view.makeDOMNodeMainAfter(l,e,g),data.addCreatedNode(e,g))}return l},appendParentULDom:function(e,t){var n=[],o=$$(t,e);!o.get(0)&&t.parentTId&&(view.appendParentULDom(e,t.getParentNode()),o=$$(t,e));var a=$$(t,consts.id.UL,e);a.get(0)&&a.remove();var r=e.data.key.children,i=view.appendNodes(e,t.level+1,t[r],t,-1,!1,!0);view.makeUlHtml(e,t,n,i.join("")),o.append(n.join(""))},asyncNode:function(setting,node,isSilent,callback){var i,l,icoObj;if(node&&!node.isParent)return tools.apply(callback),!1;if(node&&node.isAjaxing)return!1;if(0==tools.apply(setting.callback.beforeAsync,[setting.treeId,node],!0))return tools.apply(callback),!1;node&&(node.isAjaxing=!0,icoObj=$$(node,consts.id.ICON,setting),icoObj.attr({style:"",class:consts.className.BUTTON+" "+consts.className.ICO_LOADING}));for(var tmpParam={},i=0,l=setting.async.autoParam.length;node&&i<l;i++){var pKey=setting.async.autoParam[i].split("="),spKey=pKey;1<pKey.length&&(spKey=pKey[1],pKey=pKey[0]),tmpParam[spKey]=node[pKey]}if(tools.isArray(setting.async.otherParam))for(i=0,l=setting.async.otherParam.length;i<l;i+=2)tmpParam[setting.async.otherParam[i]]=setting.async.otherParam[i+1];else for(var p in setting.async.otherParam)tmpParam[p]=setting.async.otherParam[p];var _tmpV=data.getRoot(setting)._ver;return $.ajax({contentType:setting.async.contentType,cache:!1,type:setting.async.type,url:tools.apply(setting.async.url,[setting.treeId,node],setting.async.url),data:-1<setting.async.contentType.indexOf("application/json")?JSON.stringify(tmpParam):tmpParam,dataType:setting.async.dataType,success:function(msg){if(_tmpV==data.getRoot(setting)._ver){var newNodes=[];try{newNodes=msg&&0!=msg.length?"string"==typeof msg?eval("("+msg+")"):msg:[]}catch(e){newNodes=msg}node&&(node.isAjaxing=null,node.zAsync=!0),view.setNodeLineIcos(setting,node),newNodes&&""!==newNodes?(newNodes=tools.apply(setting.async.dataFilter,[setting.treeId,node,newNodes],newNodes),view.addNodes(setting,node,-1,newNodes?tools.clone(newNodes):[],!!isSilent)):view.addNodes(setting,node,-1,[],!!isSilent),setting.treeObj.trigger(consts.event.ASYNC_SUCCESS,[setting.treeId,node,msg]),tools.apply(callback)}},error:function(e,t,n){_tmpV==data.getRoot(setting)._ver&&(node&&(node.isAjaxing=null),view.setNodeLineIcos(setting,node),setting.treeObj.trigger(consts.event.ASYNC_ERROR,[setting.treeId,node,e,t,n]))}}),!0},cancelPreSelectedNode:function(e,t,n){for(var o,a=data.getRoot(e).curSelectedList,r=a.length-1;0<=r;r--)if(t===(o=a[r])||!t&&(!n||n!==o)){if($$(o,consts.id.A,e).removeClass(consts.node.CURSELECTED),t){data.removeSelectedNode(e,t);break}a.splice(r,1),e.treeObj.trigger(consts.event.UNSELECTED,[e.treeId,o])}},createNodeCallback:function(e){if(e.callback.onNodeCreated||e.view.addDiyDom)for(var t=data.getRoot(e);0<t.createdNodes.length;){var n=t.createdNodes.shift();tools.apply(e.view.addDiyDom,[e.treeId,n]),e.callback.onNodeCreated&&e.treeObj.trigger(consts.event.NODECREATED,[e.treeId,n])}},createNodes:function(e,t,n,o,a){var r,i,s,d,l,c,u;n&&0!=n.length&&(r=data.getRoot(e),i=e.data.key.children,s=!o||o.open||!!$$(o[i][0],e).get(0),r.createdNodes=[],d=view.appendNodes(e,t,n,o,a,!0,s),o?(u=$$(o,consts.id.UL,e)).get(0)&&(l=u):l=e.treeObj,l&&(0<=a&&(c=l.children()[a]),0<=a&&c?$(c).before(d.join("")):l.append(d.join(""))),view.createNodeCallback(e))},destroy:function(e){e&&(data.initCache(e),data.initRoot(e),event.unbindTree(e),event.unbindEvent(e),e.treeObj.empty(),delete settings[e.treeId])},expandCollapseNode:function(e,t,n,o,a){var r,i,s,d,l=data.getRoot(e),c=e.data.key.children;t?(l.expandTriggerFlag&&(r=a,a=function(){r&&r(),t.open?e.treeObj.trigger(consts.event.EXPAND,[e.treeId,t]):e.treeObj.trigger(consts.event.COLLAPSE,[e.treeId,t])},l.expandTriggerFlag=!1),!t.open&&t.isParent&&(!$$(t,consts.id.UL,e).get(0)||t[c]&&0<t[c].length&&!$$(t[c][0],e).get(0))&&(view.appendParentULDom(e,t),view.createNodeCallback(e)),t.open!=n?(i=$$(t,consts.id.UL,e),s=$$(t,consts.id.SWITCH,e),d=$$(t,consts.id.ICON,e),t.isParent?(t.open=!t.open,t.iconOpen&&t.iconClose&&d.attr("style",view.makeNodeIcoStyle(e,t)),t.open?(view.replaceSwitchClass(t,s,consts.folder.OPEN),view.replaceIcoClass(t,d,consts.folder.OPEN),0!=o&&""!=e.view.expandSpeed&&t[c]&&0<t[c].length?i.slideDown(e.view.expandSpeed,a):(i.show(),tools.apply(a,[]))):(view.replaceSwitchClass(t,s,consts.folder.CLOSE),view.replaceIcoClass(t,d,consts.folder.CLOSE),0!=o&&""!=e.view.expandSpeed&&t[c]&&0<t[c].length?i.slideUp(e.view.expandSpeed,a):(i.hide(),tools.apply(a,[])))):tools.apply(a,[])):tools.apply(a,[])):tools.apply(a,[])},expandCollapseParentNode:function(e,t,n,o,a){t&&(t.parentTId?(view.expandCollapseNode(e,t,n,o),t.parentTId&&view.expandCollapseParentNode(e,t.getParentNode(),n,o,a)):view.expandCollapseNode(e,t,n,o,a))},expandCollapseSonNode:function(e,t,n,o,a){var r=data.getRoot(e),i=e.data.key.children,s=t?t[i]:r[i],d=!t&&o,l=data.getRoot(e).expandTriggerFlag;if(data.getRoot(e).expandTriggerFlag=!1,s)for(var c=0,u=s.length;c<u;c++)s[c]&&view.expandCollapseSonNode(e,s[c],n,d);data.getRoot(e).expandTriggerFlag=l,view.expandCollapseNode(e,t,n,o,a)},isSelectedNode:function(e,t){if(!t)return!1;for(var n=data.getRoot(e).curSelectedList,o=n.length-1;0<=o;o--)if(t===n[o])return!0;return!1},makeDOMNodeIcon:function(e,t,n){var o=data.getNodeName(t,n),a=t.view.nameIsHTML?o:o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");e.push("<span id='",n.tId,consts.id.ICON,"' title='' treeNode",consts.id.ICON," class='",view.makeNodeIcoClass(t,n),"' style='",view.makeNodeIcoStyle(t,n),"'></span><span id='",n.tId,consts.id.SPAN,"' class='",consts.className.NAME,"'>",a,"</span>")},makeDOMNodeLine:function(e,t,n){e.push("<span id='",n.tId,consts.id.SWITCH,"' title='' class='",view.makeNodeLineClass(t,n),"' treeNode",consts.id.SWITCH,"></span>")},makeDOMNodeMainAfter:function(e,t,n){e.push("</li>")},makeDOMNodeMainBefore:function(e,t,n){e.push("<li id='",n.tId,"' class='",consts.className.LEVEL,n.level,"' tabindex='0' hidefocus='true' treenode>")},makeDOMNodeNameAfter:function(e,t,n){e.push("</a>")},makeDOMNodeNameBefore:function(e,t,n){var o=data.getNodeTitle(t,n),a=view.makeNodeUrl(t,n),r=view.makeNodeFontCss(t,n),i=[];for(var s in r)i.push(s,":",r[s],";");e.push("<a id='",n.tId,consts.id.A,"' class='",consts.className.LEVEL,n.level,"' treeNode",consts.id.A,' onclick="',n.click||"",'" ',null!=a&&0<a.length?"href='"+a+"'":""," target='",view.makeNodeTarget(n),"' style='",i.join(""),"'"),tools.apply(t.view.showTitle,[t.treeId,n],t.view.showTitle)&&o&&e.push("title='",o.replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"'"),e.push(">")},makeNodeFontCss:function(e,t){var n=tools.apply(e.view.fontCss,[e.treeId,t],e.view.fontCss);return n&&"function"!=typeof n?n:{}},makeNodeIcoClass:function(e,t){var n=["ico"];return t.isAjaxing||(n[0]=(t.iconSkin?t.iconSkin+"_":"")+n[0],t.isParent?n.push(t.open?consts.folder.OPEN:consts.folder.CLOSE):n.push(consts.folder.DOCU)),consts.className.BUTTON+" "+n.join("_")},makeNodeIcoStyle:function(e,t){var n,o=[];return t.isAjaxing||((n=t.isParent&&t.iconOpen&&t.iconClose?t.open?t.iconOpen:t.iconClose:t[e.data.key.icon])&&o.push("background:url(",n,") 0 0 no-repeat;"),0!=e.view.showIcon&&tools.apply(e.view.showIcon,[e.treeId,t],!0)||o.push("width:0px;height:0px;")),o.join("")},makeNodeLineClass:function(e,t){var n=[];return e.view.showLine?0==t.level&&t.isFirstNode&&t.isLastNode?n.push(consts.line.ROOT):0==t.level&&t.isFirstNode?n.push(consts.line.ROOTS):t.isLastNode?n.push(consts.line.BOTTOM):n.push(consts.line.CENTER):n.push(consts.line.NOLINE),t.isParent?n.push(t.open?consts.folder.OPEN:consts.folder.CLOSE):n.push(consts.folder.DOCU),view.makeNodeLineClassEx(t)+n.join("_")},makeNodeLineClassEx:function(e){return consts.className.BUTTON+" "+consts.className.LEVEL+e.level+" "+consts.className.SWITCH+" "},makeNodeTarget:function(e){return e.target||"_blank"},makeNodeUrl:function(e,t){var n=e.data.key.url;return t[n]?t[n]:null},makeUlHtml:function(e,t,n,o){n.push("<ul id='",t.tId,consts.id.UL,"' class='",consts.className.LEVEL,t.level," ",view.makeUlLineClass(e,t),"' style='display:",t.open?"block":"none","'>"),n.push(o),n.push("</ul>")},makeUlLineClass:function(e,t){return e.view.showLine&&!t.isLastNode?consts.line.LINE:""},removeChildNodes:function(e,t){if(t){var n=e.data.key.children,o=t[n];if(o){for(var a,r,i=0,s=o.length;i<s;i++)data.removeNodeCache(e,o[i]);data.removeSelectedNode(e),delete t[n],e.data.keep.parent?$$(t,consts.id.UL,e).empty():(t.isParent=!1,t.open=!1,a=$$(t,consts.id.SWITCH,e),r=$$(t,consts.id.ICON,e),view.replaceSwitchClass(t,a,consts.folder.DOCU),view.replaceIcoClass(t,r,consts.folder.DOCU),$$(t,consts.id.UL,e).remove())}}},scrollIntoView:function(e){e&&(Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(a){function e(e,t,n,o){return!1===a||n<=e+o&&e<=t+o?Math.min(n,Math.max(t,e)):(t+n)/2}for(var t,n=this,l=function a(r,i,s,d){return{left:r,top:i,width:s,height:d,right:r+s,bottom:i+d,translate:function(e,t){return a(e+r,t+i,s,d)},relativeFromTo:function(e,t){var n=r,o=i;if((e=e.offsetParent)===(t=t.offsetParent))return l;for(;e;e=e.offsetParent)n+=e.offsetLeft+e.clientLeft,o+=e.offsetTop+e.clientTop;for(;t;t=t.offsetParent)n-=t.offsetLeft+t.clientLeft,o-=t.offsetTop+t.clientTop;return a(n,o,s,d)}}}(this.offsetLeft,this.offsetTop,this.offsetWidth,this.offsetHeight);tools.isElement(t=n.parentNode);){var o=t.offsetLeft+t.clientLeft,r=t.offsetTop+t.clientTop,l=l.relativeFromTo(n,t).translate(-o,-r);t.scrollLeft=e(t.scrollLeft,l.right-t.clientWidth,l.left,t.clientWidth),t.scrollTop=e(t.scrollTop,l.bottom-t.clientHeight,l.top,t.clientHeight),l=l.translate(o-t.scrollLeft,r-t.scrollTop),n=t}}),e.scrollIntoViewIfNeeded())},setFirstNode:function(e,t){var n=e.data.key.children;0<t[n].length&&(t[n][0].isFirstNode=!0)},setLastNode:function(e,t){var n=e.data.key.children,o=t[n].length;0<o&&(t[n][o-1].isLastNode=!0)},removeNode:function(e,t){var n=data.getRoot(e),o=e.data.key.children,a=t.parentTId?t.getParentNode():n;if(t.isFirstNode=!1,t.isLastNode=!1,t.getPreNode=function(){return null},t.getNextNode=function(){return null},data.getNodeCache(e,t.tId)){$$(t,e).remove(),data.removeNodeCache(e,t),data.removeSelectedNode(e,t);for(var r=0,i=a[o].length;r<i;r++)if(a[o][r].tId==t.tId){a[o].splice(r,1);break}view.setFirstNode(e,a),view.setLastNode(e,a);var s,d,l,c,u,p=a[o].length;e.data.keep.parent||0!=p?e.view.showLine&&0<p&&(s=a[o][p-1],l=$$(s,consts.id.UL,e),c=$$(s,consts.id.SWITCH,e),u=$$(s,consts.id.ICON,e),a==n?1==a[o].length?view.replaceSwitchClass(s,c,consts.line.ROOT):(d=$$(a[o][0],consts.id.SWITCH,e),view.replaceSwitchClass(a[o][0],d,consts.line.ROOTS),view.replaceSwitchClass(s,c,consts.line.BOTTOM)):view.replaceSwitchClass(s,c,consts.line.BOTTOM),l.removeClass(consts.line.LINE)):(a.isParent=!1,a.open=!1,l=$$(a,consts.id.UL,e),c=$$(a,consts.id.SWITCH,e),u=$$(a,consts.id.ICON,e),view.replaceSwitchClass(a,c,consts.folder.DOCU),view.replaceIcoClass(a,u,consts.folder.DOCU),l.css("display","none"))}},replaceIcoClass:function(e,t,n){if(t&&!e.isAjaxing){var o=t.attr("class");if(null!=o){var a=o.split("_");switch(n){case consts.folder.OPEN:case consts.folder.CLOSE:case consts.folder.DOCU:a[a.length-1]=n}t.attr("class",a.join("_"))}}},replaceSwitchClass:function(e,t,n){if(t){var o=t.attr("class");if(null!=o){var a=o.split("_");switch(n){case consts.line.ROOT:case consts.line.ROOTS:case consts.line.CENTER:case consts.line.BOTTOM:case consts.line.NOLINE:a[0]=view.makeNodeLineClassEx(e)+n;break;case consts.folder.OPEN:case consts.folder.CLOSE:case consts.folder.DOCU:a[1]=n}t.attr("class",a.join("_")),n!==consts.folder.DOCU?t.removeAttr("disabled"):t.attr("disabled","disabled")}}},selectNode:function(e,t,n){n||view.cancelPreSelectedNode(e,null,t),$$(t,consts.id.A,e).addClass(consts.node.CURSELECTED),data.addSelectedNode(e,t),e.treeObj.trigger(consts.event.SELECTED,[e.treeId,t])},setNodeFontCss:function(e,t){var n=$$(t,consts.id.A,e),o=view.makeNodeFontCss(e,t);o&&n.css(o)},setNodeLineIcos:function(e,t){var n,o,a,r;t&&(n=$$(t,consts.id.SWITCH,e),o=$$(t,consts.id.UL,e),a=$$(t,consts.id.ICON,e),0==(r=view.makeUlLineClass(e,t)).length?o.removeClass(consts.line.LINE):o.addClass(r),n.attr("class",view.makeNodeLineClass(e,t)),t.isParent?n.removeAttr("disabled"):n.attr("disabled","disabled"),a.removeAttr("style"),a.attr("style",view.makeNodeIcoStyle(e,t)),a.attr("class",view.makeNodeIcoClass(e,t)))},setNodeName:function(e,t){var n=data.getNodeTitle(e,t),o=$$(t,consts.id.SPAN,e);o.empty(),e.view.nameIsHTML?o.html(data.getNodeName(e,t)):o.text(data.getNodeName(e,t)),tools.apply(e.view.showTitle,[e.treeId,t],e.view.showTitle)&&$$(t,consts.id.A,e).attr("title",n||"")},setNodeTarget:function(e,t){$$(t,consts.id.A,e).attr("target",view.makeNodeTarget(t))},setNodeUrl:function(e,t){var n=$$(t,consts.id.A,e),o=view.makeNodeUrl(e,t);null==o||0==o.length?n.removeAttr("href"):n.attr("href",o)},switchNode:function(e,t){if(t.open||!tools.canAsync(e,t))view.expandCollapseNode(e,t,!t.open);else if(e.async.enable){if(!view.asyncNode(e,t))return void view.expandCollapseNode(e,t,!t.open)}else t&&view.expandCollapseNode(e,t,!t.open)}};$.fn.zTree={consts:_consts,_z:{tools:tools,view:view,event:event,data:data},getZTreeObj:function(e){var t=data.getZTreeTools(e);return t||null},destroy:function(e){if(e&&0<e.length)view.destroy(data.getSetting(e));else for(var t in settings)view.destroy(settings[t])},init:function(e,t,n){var s=tools.clone(_setting);$.extend(!0,s,t),s.treeId=e.attr("id"),s.treeObj=e,s.treeObj.empty(),settings[s.treeId]=s,void 0===document.body.style.maxHeight&&(s.view.expandSpeed=""),data.initRoot(s);var o=data.getRoot(s),a=s.data.key.children;n=n?tools.clone(tools.isArray(n)?n:[n]):[],s.data.simpleData.enable?o[a]=data.transformTozTreeFormat(s,n):o[a]=n,data.initCache(s),event.unbindTree(s),event.bindTree(s),event.unbindEvent(s),event.bindEvent(s);var r={setting:s,addNodes:function(e,t,n,o){if((e=e||null)&&!e.isParent&&s.data.keep.leaf)return null;var a=parseInt(t,10);if(t=isNaN(a)?(o=!!n,n=t,-1):a,!n)return null;var r=tools.clone(tools.isArray(n)?n:[n]);function i(){view.addNodes(s,e,t,r,1==o)}return tools.canAsync(s,e)?view.asyncNode(s,e,o,i):i(),r},cancelSelectedNode:function(e){view.cancelPreSelectedNode(s,e)},destroy:function(){view.destroy(s)},expandAll:function(e){return e=!!e,view.expandCollapseSonNode(s,null,e,!0),e},expandNode:function(t,e,n,o,a){return t&&t.isParent?(!0!==e&&!1!==e&&(e=!t.open),(a=!!a)&&e&&0==tools.apply(s.callback.beforeExpand,[s.treeId,t],!0)||a&&!e&&0==tools.apply(s.callback.beforeCollapse,[s.treeId,t],!0)?null:(e&&t.parentTId&&view.expandCollapseParentNode(s,t.getParentNode(),e,!1),e!==t.open||n?(data.getRoot(s).expandTriggerFlag=a,!tools.canAsync(s,t)&&n?view.expandCollapseSonNode(s,t,e,!0,r):(t.open=!e,view.switchNode(this.setting,t),r()),e):null)):null;function r(){var e=$$(t,s).get(0);e&&!1!==o&&view.scrollIntoView(e)}},getNodes:function(){return data.getNodes(s)},getNodeByParam:function(e,t,n){return e?data.getNodeByParam(s,n?n[s.data.key.children]:data.getNodes(s),e,t):null},getNodeByTId:function(e){return data.getNodeCache(s,e)},getNodesByParam:function(e,t,n){return e?data.getNodesByParam(s,n?n[s.data.key.children]:data.getNodes(s),e,t):null},getNodesByParamFuzzy:function(e,t,n){return e?data.getNodesByParamFuzzy(s,n?n[s.data.key.children]:data.getNodes(s),e,t):null},getNodesByFilter:function(e,t,n,o){return t=!!t,e&&"function"==typeof e?data.getNodesByFilter(s,n?n[s.data.key.children]:data.getNodes(s),e,t,o):t?null:[]},getNodeIndex:function(e){if(!e)return null;for(var t=s.data.key.children,n=e.parentTId?e.getParentNode():data.getRoot(s),o=0,a=n[t].length;o<a;o++)if(n[t][o]==e)return o;return-1},getSelectedNodes:function(){for(var e=[],t=data.getRoot(s).curSelectedList,n=0,o=t.length;n<o;n++)e.push(t[n]);return e},isSelectedNode:function(e){return data.isSelectedNode(s,e)},reAsyncChildNodes:function(e,t,n){if(this.setting.async.enable){var o=!e;if(o&&(e=data.getRoot(s)),"refresh"==t){for(var a=this.setting.data.key.children,r=0,i=e[a]?e[a].length:0;r<i;r++)data.removeNodeCache(s,e[a][r]);data.removeSelectedNode(s),e[a]=[],o?this.setting.treeObj.empty():$$(e,consts.id.UL,s).empty()}view.asyncNode(this.setting,o?null:e,!!n)}},refresh:function(){this.setting.treeObj.empty();var e=data.getRoot(s),t=e[s.data.key.children];data.initRoot(s),e[s.data.key.children]=t,data.initCache(s),view.createNodes(s,0,e[s.data.key.children],null,-1)},removeChildNodes:function(e){if(!e)return null;var t=e[s.data.key.children];return view.removeChildNodes(s,e),t||null},removeNode:function(e,t){e&&((t=!!t)&&0==tools.apply(s.callback.beforeRemove,[s.treeId,e],!0)||(view.removeNode(s,e),t&&this.setting.treeObj.trigger(consts.event.REMOVE,[s.treeId,e])))},selectNode:function(t,e,n){if(t&&tools.uCanDo(s)){if(e=s.view.selectedMulti&&e,t.parentTId)view.expandCollapseParentNode(s,t.getParentNode(),!0,!1,function(){if(n)return;var e=$$(t,s).get(0);view.scrollIntoView(e)});else if(!n)try{$$(t,s).focus().blur()}catch(e){}view.selectNode(s,t,e)}},transformTozTreeNodes:function(e){return data.transformTozTreeFormat(s,e)},transformToArray:function(e){return data.transformToArrayFormat(s,e)},updateNode:function(e,t){e&&$$(e,s).get(0)&&tools.uCanDo(s)&&(view.setNodeName(s,e),view.setNodeTarget(s,e),view.setNodeUrl(s,e),view.setNodeLineIcos(s,e),view.setNodeFontCss(s,e))}};return o.treeTools=r,data.setZTreeTools(s,r),o[a]&&0<o[a].length?view.createNodes(s,0,o[a],null,-1):s.async.enable&&s.async.url&&""!==s.async.url&&view.asyncNode(s),r}};var zt=$.fn.zTree,$$=tools.$,consts=zt.consts}(jQuery);
!function (e) { var t = { event: { CHECK: "ztree_check" }, id: { CHECK: "_check" }, checkbox: { STYLE: "checkbox", DEFAULT: "chk", DISABLED: "disable", FALSE: "false", TRUE: "true", FULL: "full", PART: "part", FOCUS: "focus" }, radio: { STYLE: "radio", TYPE_ALL: "all", TYPE_LEVEL: "level" } }, c = { check: { enable: !1, autoCheckTrigger: !1, chkStyle: t.checkbox.STYLE, nocheckInherit: !1, chkDisabledInherit: !1, radioType: t.radio.TYPE_LEVEL, chkboxType: { Y: "ps", N: "ps" } }, data: { key: { checked: "checked" } }, callback: { beforeCheck: null, onCheck: null } }, k = { onCheckNode: function (e, t) { if (!0 === t.chkDisabled) return !1; var c = C.getSetting(e.data.treeId), a = c.data.key.checked; if (0 == r.apply(c.callback.beforeCheck, [c.treeId, t], !0)) return !0; t[a] = !t[a], l.checkNodeRelation(c, t); var h = g(t, o.id.CHECK, c); return l.setChkClass(c, h, t), l.repairParentChkClassWithSelf(c, t), c.treeObj.trigger(o.event.CHECK, [e, c.treeId, t]), !0 }, onMouseoverCheck: function (e, t) { if (!0 === t.chkDisabled) return !1; var c = C.getSetting(e.data.treeId), a = g(t, o.id.CHECK, c); return t.check_Focus = !0, l.setChkClass(c, a, t), !0 }, onMouseoutCheck: function (e, t) { if (!0 === t.chkDisabled) return !1; var c = C.getSetting(e.data.treeId), a = g(t, o.id.CHECK, c); return t.check_Focus = !1, l.setChkClass(c, a, t), !0 } }, a = { tools: {}, view: { checkNodeRelation: function (e, t) { var c, a = e.data.key.children, h = e.data.key.checked, i = o.radio; if (e.check.chkStyle == i.STYLE) { var n = C.getRadioCheckedList(e); if (t[h]) if (e.check.radioType == i.TYPE_ALL) { for (r = n.length - 1; 0 <= r; r--) (c = n[r])[h] && c != t && (c[h] = !1, n.splice(r, 1), l.setChkClass(e, g(c, o.id.CHECK, e), c), c.parentTId != t.parentTId && l.repairParentChkClassWithSelf(e, c)); n.push(t) } else for (var k = t.parentTId ? t.getParentNode() : C.getRoot(e), r = 0, d = k[a].length; r < d; r++) (c = k[a][r])[h] && c != t && (c[h] = !1, l.setChkClass(e, g(c, o.id.CHECK, e), c)); else if (e.check.radioType == i.TYPE_ALL) for (r = 0, d = n.length; r < d; r++) if (t == n[r]) { n.splice(r, 1); break } } else t[h] && (!t[a] || 0 == t[a].length || -1 < e.check.chkboxType.Y.indexOf("s")) && l.setSonNodeCheckBox(e, t, !0), t[h] || t[a] && 0 != t[a].length && !(-1 < e.check.chkboxType.N.indexOf("s")) || l.setSonNodeCheckBox(e, t, !1), t[h] && -1 < e.check.chkboxType.Y.indexOf("p") && l.setParentNodeCheckBox(e, t, !0), !t[h] && -1 < e.check.chkboxType.N.indexOf("p") && l.setParentNodeCheckBox(e, t, !1) }, makeChkClass: function (e, t) { var c = e.data.key.checked, a = o.checkbox, h = o.radio, i = "", i = !0 === t.chkDisabled ? a.DISABLED : t.halfCheck ? a.PART : e.check.chkStyle != h.STYLE && t[c] ? 2 === t.check_Child_State || -1 === t.check_Child_State ? a.FULL : a.PART : t.check_Child_State < 1 ? a.FULL : a.PART, n = e.check.chkStyle + "_" + (t[c] ? a.TRUE : a.FALSE) + "_" + i, n = t.check_Focus && !0 !== t.chkDisabled ? n + "_" + a.FOCUS : n; return o.className.BUTTON + " " + a.DEFAULT + " " + n }, repairAllChk: function (e, t) { if (e.check.enable && e.check.chkStyle === o.checkbox.STYLE) for (var c = e.data.key.checked, a = e.data.key.children, h = C.getRoot(e), i = 0, n = h[a].length; i < n; i++) { var k = h[a][i]; !0 !== k.nocheck && !0 !== k.chkDisabled && (k[c] = t), l.setSonNodeCheckBox(e, k, t) } }, repairChkClass: function (e, t) { var c; t && (C.makeChkFlag(e, t), !0 !== t.nocheck && (c = g(t, o.id.CHECK, e), l.setChkClass(e, c, t))) }, repairParentChkClass: function (e, t) { var c; t && t.parentTId && (c = t.getParentNode(), l.repairChkClass(e, c), l.repairParentChkClass(e, c)) }, repairParentChkClassWithSelf: function (e, t) { var c; t && (t[c = e.data.key.children] && 0 < t[c].length ? l.repairParentChkClass(e, t[c][0]) : l.repairParentChkClass(e, t)) }, repairSonChkDisabled: function (e, t, c, a) { if (t) { var h = e.data.key.children; if (t.chkDisabled != c && (t.chkDisabled = c), l.repairChkClass(e, t), t[h] && a) for (var i = 0, n = t[h].length; i < n; i++) { var k = t[h][i]; l.repairSonChkDisabled(e, k, c, a) } } }, repairParentChkDisabled: function (e, t, c, a) { t && (t.chkDisabled != c && a && (t.chkDisabled = c), l.repairChkClass(e, t), l.repairParentChkDisabled(e, t.getParentNode(), c, a)) }, setChkClass: function (e, t, c) { t && (!0 === c.nocheck ? t.hide() : t.show(), t.attr("class", l.makeChkClass(e, c))) }, setParentNodeCheckBox: function (e, t, c, a) { var h = e.data.key.children, i = e.data.key.checked, n = g(t, o.id.CHECK, e); if (a = a || t, C.makeChkFlag(e, t), !0 !== t.nocheck && !0 !== t.chkDisabled && (t[i] = c, l.setChkClass(e, n, t), e.check.autoCheckTrigger && t != a && e.treeObj.trigger(o.event.CHECK, [null, e.treeId, t])), t.parentTId) { var k = !0; if (!c) for (var r = t.getParentNode()[h], d = 0, s = r.length; d < s; d++) if (!0 !== r[d].nocheck && !0 !== r[d].chkDisabled && r[d][i] || (!0 === r[d].nocheck || !0 === r[d].chkDisabled) && 0 < r[d].check_Child_State) { k = !1; break } k && l.setParentNodeCheckBox(e, t.getParentNode(), c, a) } }, setSonNodeCheckBox: function (e, t, c, a) { if (t) { var h = e.data.key.children, i = e.data.key.checked, n = g(t, o.id.CHECK, e); a = a || t; var k = !1; if (t[h]) for (var r = 0, d = t[h].length; r < d; r++) { var s = t[h][r]; l.setSonNodeCheckBox(e, s, c, a), !0 === s.chkDisabled && (k = !0) } t != C.getRoot(e) && !0 !== t.chkDisabled && (k && !0 !== t.nocheck && C.makeChkFlag(e, t), !0 !== t.nocheck && !0 !== t.chkDisabled ? (t[i] = c, k || (t.check_Child_State = t[h] && 0 < t[h].length ? c ? 2 : 0 : -1)) : t.check_Child_State = -1, l.setChkClass(e, n, t), e.check.autoCheckTrigger && t != a && !0 !== t.nocheck && !0 !== t.chkDisabled && e.treeObj.trigger(o.event.CHECK, [null, e.treeId, t])) } } }, event: {}, data: { getRadioCheckedList: function (e) { for (var t = C.getRoot(e).radioCheckedList, c = 0, a = t.length; c < a; c++) C.getNodeCache(e, t[c].tId) || (t.splice(c, 1), c--, a--); return t }, getCheckStatus: function (e, t) { if (!e.check.enable || t.nocheck || t.chkDisabled) return null; var c = e.data.key.checked; return { checked: t[c], half: t.halfCheck ? t.halfCheck : e.check.chkStyle == o.radio.STYLE ? 2 === t.check_Child_State : t[c] ? -1 < t.check_Child_State && t.check_Child_State < 2 : 0 < t.check_Child_State } }, getTreeCheckedNodes: function (e, t, c, a) { if (!t) return []; var h = e.data.key.children, i = e.data.key.checked, n = c && e.check.chkStyle == o.radio.STYLE && e.check.radioType == o.radio.TYPE_ALL; a = a || []; for (var k = 0, r = t.length; k < r && (!0 === t[k].nocheck || !0 === t[k].chkDisabled || t[k][i] != c || (a.push(t[k]), !n)) && (C.getTreeCheckedNodes(e, t[k][h], c, a), !(n && 0 < a.length)) ; k++); return a }, getTreeChangeCheckedNodes: function (e, t, c) { if (!t) return []; var a = e.data.key.children, h = e.data.key.checked; c = c || []; for (var i = 0, n = t.length; i < n; i++) !0 !== t[i].nocheck && !0 !== t[i].chkDisabled && t[i][h] != t[i].checkedOld && c.push(t[i]), C.getTreeChangeCheckedNodes(e, t[i][a], c); return c }, makeChkFlag: function (e, t) { if (t) { var c = e.data.key.children, a = e.data.key.checked, h = -1; if (t[c]) for (var i = 0, n = t[c].length; i < n; i++) { var k = t[c][i], r = -1; if (e.check.chkStyle == o.radio.STYLE) { if (2 == (r = !0 === k.nocheck || !0 === k.chkDisabled ? k.check_Child_State : !0 === k.halfCheck || k[a] || 0 < k.check_Child_State ? 2 : 0)) { h = 2; break } 0 == r && (h = 0) } else if (e.check.chkStyle == o.checkbox.STYLE) { if (1 === (r = !0 === k.nocheck || !0 === k.chkDisabled ? k.check_Child_State : !0 === k.halfCheck ? 1 : k[a] ? -1 === k.check_Child_State || 2 === k.check_Child_State ? 2 : 1 : 0 < k.check_Child_State ? 1 : 0)) { h = 1; break } if (2 === r && -1 < h && 0 < i && r !== h) { h = 1; break } if (2 === h && -1 < r && r < 2) { h = 1; break } -1 < r && (h = r) } } t.check_Child_State = h } } } }; e.extend(!0, e.fn.zTree.consts, t), e.extend(!0, e.fn.zTree._z, a); var h = e.fn.zTree, r = h._z.tools, o = h.consts, l = h._z.view, C = h._z.data, g = (h._z.event, r.$); C.exSetting(c), C.addInitBind(function (h) { var e = h.treeObj, t = o.event; e.bind(t.CHECK, function (e, t, c, a) { e.srcEvent = t, r.apply(h.callback.onCheck, [e, c, a]) }) }), C.addInitUnBind(function (e) { var t = e.treeObj, c = o.event; t.unbind(c.CHECK) }), C.addInitCache(function (e) { }), C.addInitNode(function (e, t, c, a, h, i, n) { var k; c && (k = e.data.key.checked, "string" == typeof c[k] && (c[k] = r.eqs(c[k], "true")), c[k] = !!c[k], c.checkedOld = c[k], "string" == typeof c.nocheck && (c.nocheck = r.eqs(c.nocheck, "true")), c.nocheck = !!c.nocheck || e.check.nocheckInherit && a && !!a.nocheck, "string" == typeof c.chkDisabled && (c.chkDisabled = r.eqs(c.chkDisabled, "true")), c.chkDisabled = !!c.chkDisabled || e.check.chkDisabledInherit && a && !!a.chkDisabled, "string" == typeof c.halfCheck && (c.halfCheck = r.eqs(c.halfCheck, "true")), c.halfCheck = !!c.halfCheck, c.check_Child_State = -1, c.check_Focus = !1, c.getCheckStatus = function () { return C.getCheckStatus(e, c) }, e.check.chkStyle == o.radio.STYLE && e.check.radioType == o.radio.TYPE_ALL && c[k] && C.getRoot(e).radioCheckedList.push(c)) }), C.addInitProxy(function (e) { var t = e.target, c = C.getSetting(e.data.treeId), a = "", h = null, i = "", n = null; if (r.eqs(e.type, "mouseover") ? c.check.enable && r.eqs(t.tagName, "span") && null !== t.getAttribute("treeNode" + o.id.CHECK) && (a = r.getNodeMainDom(t).id, i = "mouseoverCheck") : r.eqs(e.type, "mouseout") ? c.check.enable && r.eqs(t.tagName, "span") && null !== t.getAttribute("treeNode" + o.id.CHECK) && (a = r.getNodeMainDom(t).id, i = "mouseoutCheck") : r.eqs(e.type, "click") && c.check.enable && r.eqs(t.tagName, "span") && null !== t.getAttribute("treeNode" + o.id.CHECK) && (a = r.getNodeMainDom(t).id, i = "checkNode"), 0 < a.length) switch (h = C.getNodeCache(c, a), i) { case "checkNode": n = k.onCheckNode; break; case "mouseoverCheck": n = k.onMouseoverCheck; break; case "mouseoutCheck": n = k.onMouseoutCheck } return { stop: "checkNode" === i, node: h, nodeEventType: i, nodeEventCallback: n, treeEventType: "", treeEventCallback: null } }, !0), C.addInitRoot(function (e) { C.getRoot(e).radioCheckedList = [] }), C.addBeforeA(function (e, t, c) { e.data.key.checked; e.check.enable && (C.makeChkFlag(e, t), c.push("<span ID='", t.tId, o.id.CHECK, "' class='", l.makeChkClass(e, t), "' treeNode", o.id.CHECK, !0 === t.nocheck ? " style='display:none;'" : "", "></span>")) }), C.addZTreeTools(function (e, a) { a.checkNode = function (e, t, c, a) { var h, i = this.setting.data.key.checked; !0 !== e.chkDisabled && (!0 !== t && !1 !== t && (t = !e[i]), a = !!a, e[i] === t && !c || a && 0 == r.apply(this.setting.callback.beforeCheck, [this.setting.treeId, e], !0) || r.uCanDo(this.setting) && this.setting.check.enable && !0 !== e.nocheck && (e[i] = t, h = g(e, o.id.CHECK, this.setting), !c && this.setting.check.chkStyle !== o.radio.STYLE || l.checkNodeRelation(this.setting, e), l.setChkClass(this.setting, h, e), l.repairParentChkClassWithSelf(this.setting, e), a && this.setting.treeObj.trigger(o.event.CHECK, [null, this.setting.treeId, e]))) }, a.checkAllNodes = function (e) { l.repairAllChk(this.setting, !!e) }, a.getCheckedNodes = function (e) { var t = this.setting.data.key.children; return e = !1 !== e, C.getTreeCheckedNodes(this.setting, C.getRoot(this.setting)[t], e) }, a.getChangeCheckedNodes = function () { var e = this.setting.data.key.children; return C.getTreeChangeCheckedNodes(this.setting, C.getRoot(this.setting)[e]) }, a.setChkDisabled = function (e, t, c, a) { t = !!t, c = !!c, a = !!a, l.repairSonChkDisabled(this.setting, e, t, a), l.repairParentChkDisabled(this.setting, e.getParentNode(), t, c) }; var h = a.updateNode; a.updateNode = function (e, t) { var c; h && h.apply(a, arguments), e && this.setting.check.enable && g(e, this.setting).get(0) && r.uCanDo(this.setting) && (c = g(e, o.id.CHECK, this.setting), 1 != t && this.setting.check.chkStyle !== o.radio.STYLE || l.checkNodeRelation(this.setting, e), l.setChkClass(this.setting, c, e), l.repairParentChkClassWithSelf(this.setting, e)) } }); var i = l.createNodes; l.createNodes = function (e, t, c, a, h) { i && i.apply(l, arguments), c && l.repairParentChkClassWithSelf(e, a) }; var n = l.removeNode; l.removeNode = function (e, t) { var c = t.getParentNode(); n && n.apply(l, arguments), t && c && (l.repairChkClass(e, c), l.repairParentChkClass(e, c)) }; var d = l.appendNodes; l.appendNodes = function (e, t, c, a, h, i, n) { var k = ""; return d && (k = d.apply(l, arguments)), a && C.makeChkFlag(e, a), k } }(jQuery);